[INFO] Scanning for projects...
[INFO] 
[INFO] -----------------------< com.pos:store-manager >------------------------
[INFO] Building store-manager 1.0-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[WARNING] 6 problems were encountered while building the effective model for org.openjfx:javafx-controls:jar:21 during dependency collection step for project (use -X to see details)
[WARNING] 6 problems were encountered while building the effective model for org.openjfx:javafx-controls:jar:20 during dependency collection step for project (use -X to see details)
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ store-manager ---
[INFO] Copying 22 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ store-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ store-manager ---
[INFO] skip non existing resourceDirectory C:\POS\src\test\resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ store-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- surefire:3.1.2:test (default-test) @ store-manager ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.pos.system.controllers.LoginControllerTest
21:40:22.930 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- Driver class org.sqlite.JDBC found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@5bc2b487
21:40:22.946 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- POS-HikariPool - configuration:
21:40:22.951 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- allowPoolSuspension.............false
21:40:22.951 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- autoCommit......................true
21:40:22.952 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- catalog.........................none
21:40:22.952 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- connectionInitSql...............none
21:40:22.952 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- connectionTestQuery.............none
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- connectionTimeout...............30000
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- dataSource......................none
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- dataSourceClassName.............none
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- dataSourceJNDI..................none
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- dataSourceProperties............{password=<masked>, prepStmtCacheSqlLimit=2048, cachePrepStmts=true, prepStmtCacheSize=250}
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- driverClassName................."org.sqlite.JDBC"
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- exceptionOverrideClassName......none
21:40:22.953 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- healthCheckProperties...........{}
21:40:22.955 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- healthCheckRegistry.............none
21:40:22.955 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- idleTimeout.....................600000
21:40:22.955 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- initializationFailTimeout.......1
21:40:22.955 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- isolateInternalQueries..........false
21:40:22.955 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- jdbcUrl.........................jdbc:sqlite:store.db
21:40:22.955 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- keepaliveTime...................0
21:40:22.955 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- leakDetectionThreshold..........0
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- maxLifetime.....................1800000
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- maximumPoolSize.................10
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- metricRegistry..................none
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- metricsTrackerFactory...........none
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- minimumIdle.....................2
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- password........................<masked>
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- poolName........................"POS-HikariPool"
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- readOnly........................false
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- registerMbeans..................false
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- scheduledExecutor...............none
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- schema..........................none
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- threadFactory...................internal
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- transactionIsolation............default
21:40:22.956 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- username........................none
21:40:22.957 [JavaFX Application Thread] DEBUG com.zaxxer.hikari.HikariConfig -- validationTimeout...............5000
21:40:22.962 [JavaFX Application Thread] INFO com.zaxxer.hikari.HikariDataSource -- POS-HikariPool - Starting...
21:40:23.070 [JavaFX Application Thread] INFO com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - Added connection org.sqlite.jdbc4.JDBC4Connection@5c59a9a6
21:40:23.072 [JavaFX Application Thread] INFO com.zaxxer.hikari.HikariDataSource -- POS-HikariPool - Start completed.
21:40:23.072 [JavaFX Application Thread] INFO com.pos.system.database.DatabaseManager -- Database connection pool initialized.
21:40:23.088 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migration for existing databases
ALTER TABLE users
ADD COLUMN force_password_change BOOLEAN DEFAULT 0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: force_password_change)
21:40:23.089 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migration: Add image_path if missing (for existing databases)
ALTER TABLE products
ADD COLUMN image_path TEXT - [SQLITE_ERROR] SQL error or missing database (duplicate column name: image_path)
21:40:23.089 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE products
ADD COLUMN image_blob BLOB - [SQLITE_ERROR] SQL error or missing database (duplicate column name: image_blob)
21:40:23.089 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migrations for existing databases
ALTER TABLE sales
ADD COLUMN shift_id INTEGER - [SQLITE_ERROR] SQL error or missing database (duplicate column name: shift_id)
21:40:23.089 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE sales
ADD COLUMN subtotal REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: subtotal)
21:40:23.090 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE sales
ADD COLUMN tax_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: tax_amount)
21:40:23.090 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE sales
ADD COLUMN discount_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: discount_amount)
21:40:23.090 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migrations for existing databases
ALTER TABLE sale_items
ADD COLUMN discount_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: discount_amount)
21:40:23.090 [JavaFX Application Thread] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE sale_items
ADD COLUMN tax_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: tax_amount)
21:40:23.100 [JavaFX Application Thread] INFO com.pos.system.database.DatabaseManager -- Database tables/schema initialized.
21:40:23.173 [POS-HikariPool housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
21:40:23.174 [POS-HikariPool housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
21:40:23.178 [POS-HikariPool connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - Added connection org.sqlite.jdbc4.JDBC4Connection@dd2fc03
21:40:23.209 [POS-HikariPool connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - After adding stats (total=2, active=0, idle=2, waiting=0)
21:40:28.112 [Thread-9] DEBUG com.pos.system.services.StoreMonitorService -- Store Monitor: Starting background check...
21:40:28.124 [Thread-9] INFO com.pos.system.services.StoreMonitorService -- Store Monitor: Current Shift Total: $0.0
21:40:39.503 [Thread-10] DEBUG com.pos.system.services.StoreMonitorService -- Store Monitor: Starting background check...
21:40:39.506 [Thread-10] INFO com.pos.system.services.StoreMonitorService -- Store Monitor: Current Shift Total: $0.0
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 20.82 s -- in com.pos.system.controllers.LoginControllerTest
[INFO] Running com.pos.system.services.CheckoutServiceTest
21:40:43.785 [main] INFO com.pos.system.services.CheckoutService -- Sale header created with ID: 500
21:40:43.787 [main] INFO com.pos.system.services.CheckoutService -- Sale items inserted for Sale ID: 500
21:40:43.789 [main] INFO com.pos.system.services.CheckoutService -- Inventory updated for 1 items.
21:40:43.789 [main] INFO com.pos.system.services.CheckoutService -- Checkout transaction committed successfully.
21:40:43.836 [main] ERROR com.pos.system.services.CheckoutService -- Checkout failed, rolling back transaction.
java.sql.SQLException: Database error
	at com.pos.system.dao.SaleDAO.insertSale(SaleDAO.java:108)
	at com.pos.system.services.CheckoutService.processCheckout(CheckoutService.java:58)
	at com.pos.system.services.CheckoutServiceTest.lambda$testProcessCheckout_RollbackOnException$0(CheckoutServiceTest.java:119)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:35)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3115)
	at com.pos.system.services.CheckoutServiceTest.testProcessCheckout_RollbackOnException(CheckoutServiceTest.java:118)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:728)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:218)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:214)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.410 s -- in com.pos.system.services.CheckoutServiceTest
[INFO] Running com.pos.system.services.InventoryServiceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.220 s -- in com.pos.system.services.InventoryServiceTest
[INFO] Running com.pos.system.services.PrinterServiceTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.044 s -- in com.pos.system.services.PrinterServiceTest
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  24.733 s
[INFO] Finished at: 2026-02-21T21:40:44+06:30
[INFO] ------------------------------------------------------------------------
