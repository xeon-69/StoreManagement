[INFO] Scanning for projects...
[INFO] 
[INFO] -----------------------< com.pos:store-manager >------------------------
[INFO] Building store-manager 1.0-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[WARNING] 6 problems were encountered while building the effective model for org.openjfx:javafx-controls:jar:21 during dependency collection step for project (use -X to see details)
[WARNING] 6 problems were encountered while building the effective model for org.openjfx:javafx-controls:jar:20 during dependency collection step for project (use -X to see details)
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ store-manager ---
[INFO] Copying 21 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ store-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ store-manager ---
[INFO] skip non existing resourceDirectory C:\POS\src\test\resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ store-manager ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- surefire:3.1.2:test (default-test) @ store-manager ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.pos.system.database.DatabaseManagerBackupTest
17:51:08.316 [main] DEBUG com.zaxxer.hikari.HikariConfig -- Driver class org.sqlite.JDBC found in Thread context class loader jdk.internal.loader.ClassLoaders$AppClassLoader@5bc2b487
17:51:08.321 [main] DEBUG com.zaxxer.hikari.HikariConfig -- POS-HikariPool - configuration:
17:51:08.329 [main] DEBUG com.zaxxer.hikari.HikariConfig -- allowPoolSuspension.............false
17:51:08.329 [main] DEBUG com.zaxxer.hikari.HikariConfig -- autoCommit......................true
17:51:08.329 [main] DEBUG com.zaxxer.hikari.HikariConfig -- catalog.........................none
17:51:08.330 [main] DEBUG com.zaxxer.hikari.HikariConfig -- connectionInitSql...............none
17:51:08.330 [main] DEBUG com.zaxxer.hikari.HikariConfig -- connectionTestQuery.............none
17:51:08.331 [main] DEBUG com.zaxxer.hikari.HikariConfig -- connectionTimeout...............5000
17:51:08.333 [main] DEBUG com.zaxxer.hikari.HikariConfig -- dataSource......................none
17:51:08.333 [main] DEBUG com.zaxxer.hikari.HikariConfig -- dataSourceClassName.............none
17:51:08.333 [main] DEBUG com.zaxxer.hikari.HikariConfig -- dataSourceJNDI..................none
17:51:08.333 [main] DEBUG com.zaxxer.hikari.HikariConfig -- dataSourceProperties............{password=<masked>, prepStmtCacheSqlLimit=2048, cachePrepStmts=true, prepStmtCacheSize=250}
17:51:08.334 [main] DEBUG com.zaxxer.hikari.HikariConfig -- driverClassName................."org.sqlite.JDBC"
17:51:08.334 [main] DEBUG com.zaxxer.hikari.HikariConfig -- exceptionOverrideClassName......none
17:51:08.334 [main] DEBUG com.zaxxer.hikari.HikariConfig -- healthCheckProperties...........{}
17:51:08.334 [main] DEBUG com.zaxxer.hikari.HikariConfig -- healthCheckRegistry.............none
17:51:08.334 [main] DEBUG com.zaxxer.hikari.HikariConfig -- idleTimeout.....................600000
17:51:08.334 [main] DEBUG com.zaxxer.hikari.HikariConfig -- initializationFailTimeout.......1
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- isolateInternalQueries..........false
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- jdbcUrl.........................jdbc:sqlite:store.db
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- keepaliveTime...................0
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- leakDetectionThreshold..........30000
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- maxLifetime.....................1800000
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- maximumPoolSize.................20
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- metricRegistry..................none
17:51:08.335 [main] DEBUG com.zaxxer.hikari.HikariConfig -- metricsTrackerFactory...........none
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- minimumIdle.....................2
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- password........................<masked>
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- poolName........................"POS-HikariPool"
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- readOnly........................false
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- registerMbeans..................false
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- scheduledExecutor...............none
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- schema..........................none
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- threadFactory...................internal
17:51:08.337 [main] DEBUG com.zaxxer.hikari.HikariConfig -- transactionIsolation............default
17:51:08.338 [main] DEBUG com.zaxxer.hikari.HikariConfig -- username........................none
17:51:08.338 [main] DEBUG com.zaxxer.hikari.HikariConfig -- validationTimeout...............5000
17:51:08.351 [main] INFO com.zaxxer.hikari.HikariDataSource -- POS-HikariPool - Starting...
17:51:08.487 [main] INFO com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - Added connection org.sqlite.jdbc4.JDBC4Connection@1ffaf86
17:51:08.487 [main] INFO com.zaxxer.hikari.HikariDataSource -- POS-HikariPool - Start completed.
17:51:08.487 [main] INFO com.pos.system.database.DatabaseManager -- Database connection pool initialized.
17:51:08.502 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migration for existing databases
ALTER TABLE users
ADD COLUMN force_password_change BOOLEAN DEFAULT 0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: force_password_change)
17:51:08.502 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migration: Add image_path if missing (for existing databases)
ALTER TABLE products
ADD COLUMN image_path TEXT - [SQLITE_ERROR] SQL error or missing database (duplicate column name: image_path)
17:51:08.503 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE products
ADD COLUMN image_blob BLOB - [SQLITE_ERROR] SQL error or missing database (duplicate column name: image_blob)
17:51:08.503 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migrations for existing databases
ALTER TABLE sales
ADD COLUMN subtotal REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: subtotal)
17:51:08.503 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE sales
ADD COLUMN tax_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: tax_amount)
17:51:08.503 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE sales
ADD COLUMN discount_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: discount_amount)
17:51:08.504 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): -- Migrations for existing databases
ALTER TABLE sale_items
ADD COLUMN discount_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: discount_amount)
17:51:08.504 [main] WARN com.pos.system.database.DatabaseManager -- Statement failed (might be expected for existing tables/columns): ALTER TABLE sale_items
ADD COLUMN tax_amount REAL DEFAULT 0.0 - [SQLITE_ERROR] SQL error or missing database (duplicate column name: tax_amount)
17:51:08.515 [main] INFO com.pos.system.database.DatabaseManager -- Database tables/schema initialized.
17:51:08.520 [main] INFO com.pos.system.database.DatabaseManager -- Normalized sale_date format in sales table.
17:51:08.521 [main] INFO com.pos.system.database.DatabaseManager -- Starting database backup...
17:51:08.555 [main] INFO com.pos.system.database.DatabaseManager -- Database backup created and compressed at: backup\store_manual_2026-02-25_17-51.zip
17:51:08.589 [POS-HikariPool housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - Before cleanup stats (total=1, active=0, idle=1, waiting=0)
17:51:08.590 [POS-HikariPool housekeeper] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - After cleanup  stats (total=1, active=0, idle=1, waiting=0)
17:51:08.591 [main] INFO com.pos.system.database.DatabaseManager -- Starting database backup...
17:51:08.592 [POS-HikariPool connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - Added connection org.sqlite.jdbc4.JDBC4Connection@1de5aea3
17:51:08.615 [main] INFO com.pos.system.database.DatabaseManager -- Database backup created and compressed at: backup\store_auto_2026-02-25_17-51.zip
17:51:08.623 [POS-HikariPool connection adder] DEBUG com.zaxxer.hikari.pool.HikariPool -- POS-HikariPool - After adding stats (total=2, active=0, idle=2, waiting=0)
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.381 s <<< FAILURE! -- in com.pos.system.database.DatabaseManagerBackupTest
[ERROR] com.pos.system.database.DatabaseManagerBackupTest.testAutoBackupAndPruningLogic -- Time elapsed: 0.060 s <<< ERROR!
java.lang.Error: 
Unresolved compilation problem: 
	List cannot be resolved to a type

	at com.pos.system.database.DatabaseManager.pruneOldBackups(DatabaseManager.java:255)
	at com.pos.system.database.DatabaseManager.performBackup(DatabaseManager.java:235)
	at com.pos.system.database.DatabaseManagerBackupTest.testAutoBackupAndPruningLogic(DatabaseManagerBackupTest.java:88)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Errors: 
[ERROR]   DatabaseManagerBackupTest.testAutoBackupAndPruningLogic:88 Â»  Unresolved compilation problem: 
	List cannot be resolved to a type

[INFO] 
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  2.910 s
[INFO] Finished at: 2026-02-25T17:51:08+06:30
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test (default-test) on project store-manager: 
[ERROR] 
[ERROR] Please refer to C:\POS\target\surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
